<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript面试题 | 偶然发现的一天</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="bloglogo.png">
    <meta name="description" content="个人学习笔记，My Note">
    <link rel="preload" href="blog/assets/css/0.styles.e21919f3.css" as="style"><link rel="preload" href="blog/assets/js/app.969250eb.js" as="script"><link rel="preload" href="blog/assets/js/2.4e43e56b.js" as="script"><link rel="preload" href="blog/assets/js/9.a9e2e04c.js" as="script"><link rel="prefetch" href="blog/assets/js/10.c8b01592.js"><link rel="prefetch" href="blog/assets/js/11.8927eac4.js"><link rel="prefetch" href="blog/assets/js/3.b389334a.js"><link rel="prefetch" href="blog/assets/js/4.315c11ee.js"><link rel="prefetch" href="blog/assets/js/5.af4a9f4d.js"><link rel="prefetch" href="blog/assets/js/6.53ca1533.js"><link rel="prefetch" href="blog/assets/js/7.e36e9648.js"><link rel="prefetch" href="blog/assets/js/8.d27da626.js">
    <link rel="stylesheet" href="blog/assets/css/0.styles.e21919f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">偶然发现的一天</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/javascript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/Node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/blog/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/blog/Data-Algorithm/" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/other/markdown/" class="nav-link">
  markdown
</a></li><li class="dropdown-item"><h4>
          面试题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/interview/js/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  js
</a></li><li class="dropdown-subitem"><a href="/blog/other/interview/vue.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/blog/javascript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/blog/Node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/blog/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/blog/Data-Algorithm/" class="nav-link">
  数据结构与算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/other/markdown/" class="nav-link">
  markdown
</a></li><li class="dropdown-item"><h4>
          面试题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/other/interview/js/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  js
</a></li><li class="dropdown-subitem"><a href="/blog/other/interview/vue.html" class="nav-link">
  vue
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/other/interview/js/" aria-current="page" class="active sidebar-link">JavaScript面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_1-bom与dom及bom相关的一些属性" class="sidebar-link">1.BOM与DOM及BOM相关的一些属性</a></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_2-防抖和节流" class="sidebar-link">2.防抖和节流</a></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_3-设计模式：发布订阅、观察者" class="sidebar-link">3.设计模式：发布订阅、观察者</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#观察者模式" class="sidebar-link">观察者模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_4-settimeout、setinterval与requestanimationframe" class="sidebar-link">4.setTimeout、setInterval与requestAnimationFrame</a></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_5-自定义log，判断数据类型" class="sidebar-link">5.自定义log，判断数据类型</a></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_6-请求优化和渲染优化的方法" class="sidebar-link">6.请求优化和渲染优化的方法</a></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_7-js闭包" class="sidebar-link">7.JS闭包</a></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_8-promise原理" class="sidebar-link">8.promise原理</a></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_9-js几种继承方式" class="sidebar-link">9.JS几种继承方式</a></li><li class="sidebar-sub-header"><a href="/blog/other/interview/js/#_10-懒加载的实现步骤" class="sidebar-link">10.懒加载的实现步骤</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript面试题"><a href="#javascript面试题" class="header-anchor">#</a> JavaScript面试题</h1> <h2 id="_1-bom与dom及bom相关的一些属性"><a href="#_1-bom与dom及bom相关的一些属性" class="header-anchor">#</a> 1.BOM与DOM及BOM相关的一些属性</h2> <p>    DOM定义了表示和修改文档对象所需的对象
这些对象的行为和属性以及这些对象之间的关系 DOM对象即为宿主对象 由浏览器厂商定义
用来操作html和css功能的一类对象的集合 也有人称DOM是对HTML和XML的编程接口
BOM定义了操作浏览器的接口 BOM对象: Window History Navigator Screen Location等
由于浏览器厂商的不同 BOM对象的兼容性极低 一般情况下 我只用其中的部分功能</p> <h2 id="_2-防抖和节流"><a href="#_2-防抖和节流" class="header-anchor">#</a> 2.防抖和节流</h2> <p>    防抖&amp;节流 在前端开发中有一部分的用户行为会频繁的触发事件执行
而对DOM操作丶资源加载等耗费性能的处理 很可能会导致页面卡顿
甚至浏览器崩溃 函数节流和函数防抖就是为了解决类似需求应运而生的
为什么会导致页面卡顿呢 本质是因为我们js是单线程的</p> <p><b>节流函数</b>节流就是预定一个函数只有在大于等于执行周期时才执行 周期内调用不执行
好像水滴攒到一定重量才会落下一样 场景 窗口调整 页面滚动 瀑布流的布局或者进行动态页面的加载
抢购疯狂点击 脚本式的触发事件进行疯狂点击 向服务器发送疯狂的请求 服务器会崩溃</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">method<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">var</span> last <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">var</span> now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">if</span><span class="token punctuation">(</span>now <span class="token operator">-</span> last <span class="token operator">&gt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token function">method</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        last <span class="token operator">=</span> now<span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><p><b>防抖函数</b>防抖就是在函数需要频繁触发情况时 只有足够空闲的时间 才执行一次 好像公交司机会等人都上车后才出站一样 等一小段时间没人再上才走 场景 实时搜索 拖拽</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">handler<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">var</span> _self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> 
        _arg <span class="token operator">=</span> arguments<span class="token punctuation">;</span> 
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token function">setTimerout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">handler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>_self<span class="token punctuation">,</span> _arg<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-设计模式：发布订阅、观察者"><a href="#_3-设计模式：发布订阅、观察者" class="header-anchor">#</a> 3.设计模式：发布订阅、观察者</h2> <h3 id="观察者模式"><a href="#观察者模式" class="header-anchor">#</a> 观察者模式</h3> <p>观察者模式又叫做发布-订阅模式是我们最常用的设计模式之一 它定义对象间的一种一对多的依赖关系
当一个对象的状态发生改变时 所有依赖于它的对象都将得到通知和更新观察者模式提供一个了一个订阅模式
其中对象订阅事件在发生时得到通知 这种模式事件驱动的编程基石 它有利于良好的面向对象的设计
</p><h4>应用场景:</h4>
1.DOM事件<br>
2.自定义事件
<h4>优点:</h4>
1.一是时间上的解耦 二是对象上的解耦<br>
2.即可用于异步编程中 也可以用帮助我们完成更松耦合的代码编写 缺点:<br>
3.创建订阅者本身要消耗一定的时间和内存<br>
4.当订阅一个消息时 也许此消息并没有发生 但这个订阅者会始终存在内存中<br>
5.观察者模式弱化了对象之间的联系 这本是好事 但如果过度使用 对象与对象之间的联系也会隐藏的很深 会导致项目的难以跟踪维护和理解  ```<p></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Event</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 存储不同的事件类型对应不同的处理函数 保证后续emmit可以执行 </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">on</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> handle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>handle<span class="token punctuation">]</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
<span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">emmit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// 没有保证参数是多少个 就用arguments </span>
    <span class="token keyword">var</span> type <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> arg <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 检查是否有标记 </span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>    
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
<span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">empty</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> handle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">return</span> ele <span class="token operator">!=</span> handle<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span> 
<span class="token class-name">Event</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">once</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> handle</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    <span class="token comment">// 做标记 </span>
    handle<span class="token punctuation">.</span>flag <span class="token operator">=</span> <span class="token string">'true'</span><span class="token punctuation">;</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token keyword">var</span> oE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">function</span> <span class="token function">deal1</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'overtime1:'</span> <span class="token operator">+</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
oE<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'over'</span><span class="token punctuation">,</span> deal1<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">function</span> <span class="token function">deal2</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'overtime2:'</span> <span class="token operator">+</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
oE<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'over'</span><span class="token punctuation">,</span> deal2<span class="token punctuation">)</span><span class="token punctuation">;</span>
oE<span class="token punctuation">.</span><span class="token function">emmit</span><span class="token punctuation">(</span><span class="token string">'over'</span><span class="token punctuation">,</span> <span class="token string">'2018-9-25'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
oE<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'over'</span><span class="token punctuation">,</span> deal2<span class="token punctuation">)</span><span class="token punctuation">;</span> 
oE<span class="token punctuation">.</span><span class="token function">emmit</span><span class="token punctuation">(</span><span class="token string">'over'</span><span class="token punctuation">,</span> <span class="token string">'seconde-1-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-settimeout、setinterval与requestanimationframe"><a href="#_4-settimeout、setinterval与requestanimationframe" class="header-anchor">#</a> 4.setTimeout、setInterval与requestAnimationFrame</h2> <p>1.与setTimeout和setInterval不同 requestAnimationFrame不需要设置时间间隔<br>
2.setTimeout和setInterval的问题是 它们都不精确 它们的内在运行机制决定了时间间隔参数实际上只是把指定了把动画代码添加到浏览器UI线程队列中以等待执行的时间 如果队列前面已经加入了其他任务 那动画代码就要等待前面的任务执行完成后再执行<br>
3.requestAnimationFrame采用系统时间间隔 保持最佳绘制效率 不会因为时间间隔过短 造成过度绘制 增加开销 也不会因为时间间隔太长 使用动画不流畅 让各种网页动画效果能够有一个统一的刷新机制 从而节省系统资源 提高系统性能 改善视觉效果</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span>requestAnimationFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> window<span class="token punctuation">.</span>requestAnimationFrame <span class="token operator">||</span> 
           window<span class="token punctuation">.</span>webkitRequestAnimationFrame <span class="token operator">||</span> 
           window<span class="token punctuation">.</span>mozRequestAnimationFrame <span class="token operator">||</span> 
           <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
          <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
window<span class="token punctuation">.</span>cancelAnimationFrame <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span>  window<span class="token punctuation">.</span>cancelAnimationFrame <span class="token operator">||</span> 
            window<span class="token punctuation">.</span>webkitCancelAnimationFrame <span class="token operator">||</span> 
            window<span class="token punctuation">.</span>mozCancelAnimationFrame <span class="token operator">||</span> 
            <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                window<span class="token punctuation">.</span><span class="token function">clearTimout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 方块水平移动 </span>
<span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    left <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span> 
    box<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-自定义log，判断数据类型"><a href="#_5-自定义log，判断数据类型" class="header-anchor">#</a> 5.自定义log，判断数据类型</h2> <p>1.<strong>typeof</strong> 缺点: 结果返回六种数据类型 number string boolean object function undefined 对于null及数组丶对象 typeof均检测出object 不能进一步判断它们的类型<br>
2.<strong>instanceof A instanceof B</strong> A对象是不是B构造函数出来的实例(看A对象的原型链上有没有B的原型) 缺点:<br>
3.<strong>instanceof</strong>不能区别undefined和null 因为undefied和null没有原型<br>
4.<strong>constructor</strong> 定义: 返回实例的构造函数 即返回创建此对象的函数引用 缺点: constructor不能判断undefined和null 并且使用它是不安全的 因为constructor的指向是可以改变<br>
5.<strong>Object.prototype.toString.call()</strong> 缺点: 它不能检测非原生构造函数的构造函数名 $.type()内部原理就是用的Object.prototype.toString.call()</p> <h2 id="_6-请求优化和渲染优化的方法"><a href="#_6-请求优化和渲染优化的方法" class="header-anchor">#</a> 6.请求优化和渲染优化的方法</h2> <p>        
减少HTTP请求数(最重要最有效) 一个完整的请求都需要DNS寻址丶与服务器建立连接丶发送数据丶等待服务器响应丶接受数据这样一个漫长而复杂的过程
由于浏览器进行并发请求的请求数都是有上限的 因此请求数多了以后 浏览器需要分批进行请求 因此会增加用户的等待时间
会给用户造成网站速度慢这样的一个印象 即使可能用户能看到的第一屏的资源都已经请求完了 但是浏览器的进度条一直在加载</p> <h4 id="请求优化-减少http请求数的一些途径"><a href="#请求优化-减少http请求数的一些途径" class="header-anchor">#</a> 请求优化---------- 减少HTTP请求数的一些途径</h4> <p><b style="color:deeppink;">1.从设计实现层面优化页面 如果你的页面和百度的页面一眼简单 那么也就不需要什么优化操作了 因此保持页面简洁丶减少资源的使用是最直接的</b><br> <b style="color:#db63dd;">2.合理设置HTTP缓存 缓存的力量是强大的 恰当的缓存设置可以大大减少HTTP请求 怎么才是合理的设置 原则很简单: 能缓存越多越久越好
例如: 很少变化的图片资源就可以直接通过HTTP Header中的Expires设置一个很长的过期头 变化不频繁而又可能会变的资源可以使用Last-Modified来做请求验证
尽可能的让资源能够在缓存中待的更久</b><br> <b style="color:#14ff93;">3.资源合并与压缩 如果可以的话 尽可能的将外部脚本丶样式进行合并 尽可能地合并为一个
另外 CSS JS Image都可以用相应的工具进行压缩 压缩后往往能节省不少空间 或者使用Webpack等前端工厂化工具进行代码的压缩和去重</b><br> <b style="color:orange;">4.CSS Sprites雪碧图 雪碧图又叫做精灵图 我们可以把网站中需要用到的一些icon 全部放到一个图片资源中
然后通过改变位置来获取需要的图片 这样合并CSS图片 就可以大幅度减少HTTP请求数了</b><br> <b style="color:deepskyblue;">5.Inline Images 使用data: URL scheme的方式将图片嵌入到页面或CSS中 如果不考虑资源管理上的问题的话
不失为一个好办法 如果是嵌入页面的话换来的是增大了页面的体积 而且无法利用好浏览器缓存 使用CSS中的图片更为理想一些</b><br> <b style="color:gray;">6.Lazy Load Images 懒加载 这条策略实际上并不一定能减少HTTP请求数 但是却能在某些条件下或者页面刚加载时减少HTTP请求数
对于图片而言 在页面加载的时候只加载第一屏 当用户继续往后滚屏的时候才加载后续的图片 这样一来
假如用户只对第一屏的内容感兴趣时 那剩余的图片请求就都节省了 有的首页曾经的做法是在加载的时候把第一屏之后的图片地址缓存在Textarea标签中 待用户往下滚屏的时候才&quot;惰性&quot;加载 </b><br> <b style="color:green;">7.瀑布流 其实懒加载并不能减少HTTP请求数 它只是减少页面刚加载的时候的HTTP请求数 总数是不变的 对于图片而言
在页面刚加载的时候可能只加载第一屏的图片 随着用户的滚动才会继续加载后面的图片资源 这种瀑布流的加载方式就可以有效提高性能</b><br> <b style="color:blue;">8.减少不必要的HTTP跳转 对于以目录形式访问的HTTP链接 很多人都会忽略链接最后是否带&quot;/&quot; 加入你的服务器对此区别对待的话
那么你也需要注意了 这其中很可能隐藏了301跳转 增加了多余请求</b><br> <b style="color:red;">9.避免重复的资源请求 这种情况主要是由于在模块化开发的时候 我们的不同模块化之间可能有相同的部分 导致资源的重复请求</b></p> <h4 id="渲染优化"><a href="#渲染优化" class="header-anchor">#</a> 渲染优化-------------</h4> <p><b style="color:#ff10d7;">1.将外部脚本放在底部 前文有谈到 浏览器是可以并发请求的 这一特点使得其能够更快的加载资源
然而外部脚本在加载时却会阻塞其他资源 例如在脚本加载完成之前 他后面的图片丶样式以及其他的脚本都处于阻塞状态
直到脚本加载完成后才会开始加载 如果将脚本放在靠前的位置 则会影响整个页面的加载速度从而影响用户体验
解决这一问题的方法有很多 而最简单可依赖的方法就是将脚本尽可能的往后挪 减少对并发下载的影响 </b><br> <b style="color:red;">2.将CSS放在HEAD中 如果将CSS放在其他地方比如body中 则浏览器有可能还未下载和解析到CSS就开始渲染页面了<br>
这就导致由无CSS状态跳转到CSS状态 用户体验比较糟糕 除此之外 有些浏览器会在CSS下载完成后才开始渲染页面 如果CSS放在靠下的位置则会导致浏览器将渲染事件推迟</b><br> <b style="color:#b20060;">3.慎用with with会改变作用域链 有可能导致我们的作用域链变长 导致查询性能下降</b><br> <b style="color:#6c10ff;">4.避免使用eval和Function 每次eval或Function构造函数作用于字符串表示的源代码时
脚本引擎都需要将源代码转换成可执行代码 这是很耗费资源的操作 -- 通常比简单的函数调用慢100倍以上</b><br> <b style="color:#8168a9;">5.减少作用域链查找 如果在循环中需要访问非作用域下的变量的时候 请遍历之前用局部变量缓存的变量 并在遍历结束之后重写缓存变量</b><br> <b style="color:#17c9ff;">6.减少数据访问 js中对直接量和局部变量的访问时最快的 对对象属性以及数组的访问需要更大的开销
当出现下面的情况的时候 建议将数据放入局部变量 对任何对象属性的访问超过1次 对任何数组成员的访问次数超过1次 另外 要尽可能的减少对对象以及数组的深度查找</b><br> <b style="color:#17ff49;">7.减少字符串拼接 字符串拼接尽可能少的使用&quot;+&quot; 这种方式的效率是十分低下的 因为每次运行都会开辟新的内存并生成新的字符串变量
然后将拼接的结果赋值给新变量 建议使用的是先转化为数组 如果通过数组的join方法来连接成字符串 不过由于数组也有一定的开销
因此就需要权衡一下 当拼接的字符串比较少的时候 可以考虑用&quot;+&quot;的方式 比较多的时候就需要考虑用数组的join方法了</b><br> <b style="color:#f1d929;">8.减少DOM操作 (DOM操作应该是脚本中最耗费性能的一类操作) HTMLCollection(HTML收集器 返回的是一个数组的内容信息)
因为是这个集合并不是一个静态的集合 它表示的仅仅是一个特定的查询 每次访问该集合时都会重新执行这个 查询从而更新查询结果
所谓的&quot;访问集合&quot;包括读取集合的length属性丶访问集合中的元素</b><br> <b style="color:#f16a29;">9.避免重排重绘 页面有三个树: DOMTree丶CSSTree丶renderTree(实际上多于三个) renderTree上有两个规则
repaint和reflow 重排和重绘 repaint是元素自身的位置和宽高不变 只改变颜色的之类的属性而不会导致后面的元素位置的变化的位置
renderTree发生的动作 reflow是元素自身的位置或宽高改变了从而导致的整个页面的大范围移动的时候 renderTree发生的动作 所以我们在DOM操作的时候 要尽量避免重排</b></p> <h2 id="_7-js闭包"><a href="#_7-js闭包" class="header-anchor">#</a> 7.JS闭包</h2> <p><strong>闭包定义</strong>: 当内部函数被保存到外部时 将会生成闭包 闭包会导致原有作用域链不释放 造成内存泄露<br> <strong>闭包的好处</strong>:  变量长期驻扎在内存中 、 避免污染全局变量 、 私有成员的存在<br> <strong>闭包的坏处</strong>:  增大内存的使用量 、 容易造成内存泄漏<br> <strong>闭包</strong>----的作用/使用场景?例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 累加器 </span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword">function</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        count <span class="token operator">++</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">return</span> demo<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 缓存 </span>
<span class="token keyword">function</span> <span class="token function">eater</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">var</span> food <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> 
        <span class="token function-variable function">eat</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'i am eating'</span> <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> food<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            food <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token function-variable function">push</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">myFood</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            food <span class="token operator">=</span> myFood<span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">var</span> eater1 <span class="token operator">=</span> <span class="token function">eater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
eater1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
eater1<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 闭包的私有化 </span>
<span class="token keyword">function</span> <span class="token function">Deng</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> wife</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">var</span> prepareWife <span class="token operator">=</span> <span class="token string">'xiaozhang'</span><span class="token punctuation">;</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span>wife <span class="token operator">=</span> wife<span class="token punctuation">;</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">divorce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>wife <span class="token operator">=</span> prepareWife<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">changePrepareWife</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        prepareWife <span class="token operator">=</span> target<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayPrepareWife</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prepareWife<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
<span class="token keyword">var</span> deng <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Deng</span><span class="token punctuation">(</span><span class="token string">'deng'</span><span class="token punctuation">,</span> <span class="token string">'xiaoliu'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
deng<span class="token punctuation">.</span>prepareWife<span class="token punctuation">;</span> 
deng<span class="token punctuation">.</span><span class="token function">sayPrepareWife</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_8-promise原理"><a href="#_8-promise原理" class="header-anchor">#</a> 8.promise原理</h2> <p>Promise是异步编程的一种解决方案 所谓的Promise 简单来说就是一个容器 里面保存着未来才会结束的事件的结果
Promise对象有以下两个特点</p> <p>1.对象的状态不受外界影响 Promise对象代表一种异步操作 有三种状态:Pending(进行中) Resolved(已完成) Rejected(已失败)
只有异步操作的结果可以改变状态 其他的任何操作都不能改变状态<br>
2.一旦状态改变了 就不会再变了 任何时候都可以得到这个结果 Promise对象的状态只有两种可能:Pending-&gt;Resolved或Pending-&gt;
Rejected 只要这两种情况发生了 状态就不会发生改变了 并且会一直保持这个结果 这与事件监听不同 事件的特点是 不同时间监听 得到的结果是不同的<br> <strong>使用场景</strong>:  Ajax请求 、自定义弹窗处理 、图片加载  <a href="https://juejin.im/entry/58e1d720ac502e006c0e0196" target="_blank" rel="noopener noreferrer">详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_9-js几种继承方式"><a href="#_9-js几种继承方式" class="header-anchor">#</a> 9.JS几种继承方式</h2> <p><strong>什么是js继承? 子类可以使用父类的所有功能 并且对这些功能进行拓展</strong><br>
1.传统形式(原型链继承) 缺点: 过多的继承了没用的属性<br>
2.借用构造函数继承(类式继承) 优点: 可以传参 缺点: 不能继承借用构造函数的原型 每次构造函数都要多走一个函数<br>
3.组合式继承(通俗来讲就是用原型链实现对原型属性和方法的继承 用借用构造函数继承来实现对实例属性的继承)<br>
优点: 避免了原型链和构造函数的缺陷 融合他们的优点 成为JavaScript中最常用的继承模式 缺点: 实例和原型上存在两份相同的属性<br>
4.共享原型 不能随便改动自己的原型<br>
5.圣杯模式(寄生组合继承)</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1.</span>
<span class="token class-name">Grand</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>lastName <span class="token operator">=</span> <span class="token string">'JC'</span> 
<span class="token keyword">function</span> <span class="token function">Grand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> grand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Grand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">Father</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> grand<span class="token punctuation">;</span> 
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'hehe'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> 
<span class="token keyword">var</span> father <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> father<span class="token punctuation">;</span> 
<span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 
<span class="token keyword">var</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//2.d</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span> <span class="token punctuation">}</span> 
<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> grade</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>grade <span class="token operator">=</span> grade<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token keyword">var</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'dg'</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token string">'male'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//3.</span>
<span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getfaName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>faName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> 
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>faName <span class="token operator">=</span> <span class="token string">'father'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>chName <span class="token operator">=</span> <span class="token string">'child'</span><span class="token punctuation">;</span> <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> 
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Child<span class="token punctuation">;</span> 
<span class="token keyword">var</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//4. </span>
<span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>lastName <span class="token operator">=</span> <span class="token string">'Deng'</span><span class="token punctuation">;</span> 
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 
<span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 
<span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> 
<span class="token keyword">var</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> father <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//5. </span>
<span class="token keyword">function</span> <span class="token function">inherit</span><span class="token punctuation">(</span><span class="token parameter">Target<span class="token punctuation">,</span> Origin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Origin</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> 
    <span class="token class-name">Target</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token class-name">Target</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Target<span class="token punctuation">;</span> 
    <span class="token class-name">Target</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>uber <span class="token operator">=</span> <span class="token class-name">Origin</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token keyword">var</span> inherit <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Target<span class="token punctuation">,</span> Origin</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
        <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Origin</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> 
        <span class="token class-name">Target</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token class-name">Target</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>contructor <span class="token operator">=</span> Target<span class="token punctuation">;</span> 
        <span class="token class-name">Target</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>uber <span class="token operator">=</span> <span class="token class-name">Origin</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_10-懒加载的实现步骤"><a href="#_10-懒加载的实现步骤" class="header-anchor">#</a> 10.懒加载的实现步骤</h2> <p>1.刚打开首页进来就请求一次的数据 请求数据url后面加个时间戳防止再次请求访问同一个url
的时候拿是浏览器缓存的值 然后加个锁设置为false防止它再次请求<br>
2. 用forEach循环数据 动态创建img标签 把数据中图片的地址赋予img的src 并把数据中图片的宽按比例给img设置上宽高
然后调用一个函数for循环判断哪一列的高度最低就插入图片 全部插入完毕后此时锁为true<br>
3. 根据滚动轮的document.documentElement/body.scrollTop值加上document.documentElement/body.clientHeight的值是否大于大于最短的一列的高度
如果大于的话 再次请求数据 懒加载的原理 用forEach循环数据 动态创建img标签 把数据中图片的地址赋予img的src 并把数据中图片的宽按比例给img设置上宽高
然后调用一个函数for循环判断哪一列的高度最低就插入图片 根据滚动轮的document.documentElement/body.scrollTop值加上document.documentElement/
body.clientHeight的值是否大于大于最短的一列的高度 如果大于的话 再次请求数据 懒加载使用场景 很多页面，内容很丰富，页面很长，图片较多。比如说各种商城页面。
这些页面图片数量多，而且比较大，少说百来K，多则上兆。要是页面载入就一次性加载完毕。估计大家都会等到黄花变成黄花菜了 懒加载的好处 页面加载速度快、
可以减轻服务器的压力、节约了流量,用户体验好<br> <strong>懒加载的实现方式</strong></p> <ol><li>第一种是纯粹的延迟加载 使用setTimeout或setInterval进行加载延迟</li> <li>第二种是条件加载 符合某些条件或触发了某种事件才才开始异步下载</li> <li>第三种是可视区加载 即仅加载用户可以看到的区域 这个由监控滚动条来实现 一般会在距用户看到某图片前一定距离开始加载 这样保证用户拉下时正好能看到图片
会遇到的问题-------- 图片请求失败了? 在chrome中给图片默认添加个小框框 里面有个裂开的小图标 这个小框框哪怕你给它border设置成0也不好使
你可以让当前的这个img用一个div把它包裹起来 比如div的宽度写死为200px 然后把图片的像素可以上下左右往外扩1像素 就是宽度为202px了
这个div设置一个属性overflow: hidden就可以把border隐藏起来了怎么插入图片? 调用一个函数用for循环判断哪一列的高度最低就插入图片
在瀑布流中怎么解决由于图片的动态的延迟加载出现高度不确定的问题</li> <li>可把图片宽高存起来，显示的时候就按宽高比缩放。</li> <li>预加载图片，动态加载得到图片URL，js拿到url后先把图片加载到本地，等所有图片加载完，再插入页面中 什么时候去请求数据加载?
看到最短LI的立马加载好,防止用户看到空白的时间过长 为什么GET请求要把时间戳的值拼接到url后面?
GET请求会有浏览器的缓存 为了保证GET请求不用浏览器的缓存 在后面添加时间戳 添加时间戳的原理让当前的URL跟每次的URL都不相同
至于为什么会有缓存? 第一次请求 服务器会把资源放在浏览器上帮你缓存起来 第二次再访问同一个URL会拿缓存的资源
不同URL没有缓存 可以传一些无关的参数(时间戳 返回的毫秒数不会相同, 随机数小概率相同)
为什么把数据拿出来(为什么要用假数据)? 服务器都有安全限制 它会允许你在某个时间内请求多少次 在某个间内请求的次数太多就给你限制住了
不让你请求数据 开发的时候把数据拿出来 模拟一个假数据 数据还没遭出来 模拟假数据 接口文档(请求方式 请求地址 请求参数)
传统的实现方法是 监听scroll事件 这种方法的缺点是 由于scroll事件的密集发生 计算量很大 容易造成性能问题
目前有一个新的IntersectionObserve API 可以自动&quot;观察&quot;元素是否可见 Chrome51+已经支持 本质是目标元素与视口产生一个交叉区
所以这个API叫做&quot;交叉观察器&quot; var io = new IntersectionObserver(callback, option);
注意点/缺点 intersectionObserver API是异步的 不随着目标元素的滚动同步触发 规格写明 即只有线程空闲下拉
才会执行观察器 这意味着 这个观察器的优先级非常低 只有在其他任务执行完 浏览器有了空闲才会执行 详解:
http://www.ruanyifeng.com/blog/2016/11/intersectionobserver_api.html</li></ol> <p><strong>什么是预加载?</strong>
提前加载图片 当用户需要查看时可直接从本地缓存中渲染 为什么要用到懒加载? 图片预先加载到浏览器
访问者便可顺利地在你的网站上冲浪 并享受极快的加载速度 这对图片画廊及图片占据很大比例的网站来说是十分有利的
它保证了图片快速丶无缝地发布 也可帮助用户在浏览你网站内容时获得更好的用户体验 实现预加载的方法有哪些?</p> <ol><li>用CSS和JavaScript实现预加载</li> <li>仅用JavaScript实现预加载</li> <li>使用Ajax实现预加载 常用的是new Image();<br>
设置其src来实现预载 再使用onload方法回调预载完成事件 只要浏览器把图片下载到本地
同样的src就会使用缓存 这是最基本也是最实用的预加载方法 当Image下载完图片后 会得到宽和高
会得到宽和高，因此可以在预载前得到图片的大小(方法是用记时器轮循宽高变化)。</li></ol> <p><strong>懒加载和预加载的区别?</strong> 本质是懒加载对服务端前端有一定的缓解的作用 预加载则会增加服务端前端压力</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="blog/assets/js/app.969250eb.js" defer></script><script src="blog/assets/js/2.4e43e56b.js" defer></script><script src="blog/assets/js/9.a9e2e04c.js" defer></script>
  </body>
</html>
